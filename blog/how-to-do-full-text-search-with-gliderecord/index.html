<!DOCTYPE html>
<html>
  <head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="initial-scale=1">
<link href="https://fonts.googleapis.com/css?family=Julius+Sans+One|Slabo+13px|Open+Sans:300" rel="stylesheet">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
<meta charset="utf-8">
<link rel="stylesheet" href="https://codecreativeio.github.io/assets/main.min.d206194abbd1ce5a0ca819b68f103dc21cb08c4864ac772c71d5e60a0e10d86e.css">
<title>How To Do Full Text Search With GlideRecord | CodeCreative | A ServiceNow Blog</title>
<meta name="description" content="When looking at the form filters in ServiceNow, I think all admins and developers reach a point where we start to wonder &#34;How do I search Keywords in my scripts?&#34; After all, that full text search using &#34;for text&#34; or the &#34;Keywords&#34; filter is so tantalizing for any custom CMS / Service Portal search feature.">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?d=20181101201248">
<link rel="canonical" href="https://codecreativeio.github.io/blog/how-to-do-full-text-search-with-gliderecord/"><meta property="og:site_name" content="CodeCreative | A ServiceNow Blog">
<meta property="og:title" content="How To Do Full Text Search With GlideRecord">
<meta property="og:url" content="https://codecreativeio.github.io/blog/how-to-do-full-text-search-with-gliderecord/">

<meta property="og:type" content="article">

<meta property="og:description" content="When looking at the form filters in ServiceNow, I think all admins and developers reach a point where we start to wonder &#34;How do I search Keywords in my scripts?&#34; After all, that full text search using &#34;for text&#34; or the &#34;Keywords&#34; filter is so tantalizing for any custom CMS / Service Portal search feature.">

<meta property="og:image" content="https://codecreativeio.github.io/blog/how-to-do-full-text-search-with-gliderecord/images/social.png">

<meta itemprop="name" content="How To Do Full Text Search With GlideRecord">
<meta itemprop="url" content="https://codecreativeio.github.io/blog/how-to-do-full-text-search-with-gliderecord/">
<meta itemprop="description" content="When looking at the form filters in ServiceNow, I think all admins and developers reach a point where we start to wonder &#34;How do I search Keywords in my scripts?&#34; After all, that full text search using &#34;for text&#34; or the &#34;Keywords&#34; filter is so tantalizing for any custom CMS / Service Portal search feature.">

<meta itemprop="thumbnailUrl" content="https://codecreativeio.github.io/blog/how-to-do-full-text-search-with-gliderecord/images/social.png">
<link rel="image_src" href="https://codecreativeio.github.io/blog/how-to-do-full-text-search-with-gliderecord/images/social.png">
<meta itemprop="image" content="https://codecreativeio.github.io/blog/how-to-do-full-text-search-with-gliderecord/images/social.png">


<meta name="twitter:title" content="How To Do Full Text Search With GlideRecord">
<meta name="twitter:image" content="https://codecreativeio.github.io/blog/how-to-do-full-text-search-with-gliderecord/images/social.png">
<meta name="twitter:url" content="https://codecreativeio.github.io/blog/how-to-do-full-text-search-with-gliderecord/">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:description" content="When looking at the form filters in ServiceNow, I think all admins and developers reach a point where we start to wonder &#34;How do I search Keywords in my scripts?&#34; After all, that full text search using &#34;for text&#34; or the &#34;Keywords&#34; filter is so tantalizing for any custom CMS / Service Portal search feature.">

<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="">

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-90280965-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-90280965-1');
</script>

<script type="application/ld+json">
{
    "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https://codecreativeio.github.io/"
    },
    "name" : "How To Do Full Text Search With GlideRecord",
    "headline" : "How To Do Full Text Search With GlideRecord",
    "description" : "When looking at the form filters in ServiceNow, I think all admins and developers reach a point where we start to wonder &#34;How do I search Keywords in my scripts?&#34; After all, that full text search using &#34;for text&#34; or the &#34;Keywords&#34; filter is so tantalizing for any custom CMS / Service Portal search feature.","image": "https://codecreativeio.github.io/blog/how-to-do-full-text-search-with-gliderecord/images/social.png","inLanguage" : "en-US",
      "author" : "Travis Toulson",
      "creator" : "Travis Toulson","publisher": "Travis Toulson",
    "copyrightHolder" : "Travis Toulson",
    "copyrightYear" : "2017",
    "datePublished": "2017-03-08 20:53:00 &#43;0000 UTC",
    "dateModified" : "2017-03-08 20:53:00 &#43;0000 UTC",
    "url" : "https://codecreativeio.github.io/blog/how-to-do-full-text-search-with-gliderecord/",
    "wordCount" : "491",
    "keywords" : [ "Blog" ]
}
</script>


  </head>
  <body><header role="banner">
  <h1 class="logo">
      <a href="/">
         <img src="/assets/codecreativelogo.png" alt="How To Do Full Text Search With GlideRecord" />
         <span class="sr-only">CodeCreative Logo, click to navigate home</span>
      </a>
    </h1>

  <div class="menuToggle">
    <button class="hamburger" type="button" onclick="toggleMenu()">
      <span class="hamburger-box">
        <span class="hamburger-inner"></span>
      </span>
      <span class="sr-only">Toggle Menu</span>
    </button>
  </div>

  <nav class="fullNav">
    <ul>
      
      
        <li title="Home">
          <a class="" href="/">Home</a>
        </li>
      
        <li title="Blog">
          <a class="" href="/blog/">Blog</a>
        </li>
      
        <li title="About">
          <a class="" href="/about/">About</a>
        </li>
      
        <li title="Contact">
          <a class="" href="/contact/">Contact</a>
        </li>
      
    </ul>
  </nav>
</header>
<main>
  <header class="banner">
    <h1>How To Do Full Text Search With GlideRecord</h1>
  </header>

  <div class="content text-content">
    <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

      <header class="post-header">
        <h1 class="post-title p-name sr-only" itemprop="name headline">How To Do Full Text Search With GlideRecord</h1>
        <p class="post-meta">
            <time class="dt-published" datetime="2017-03-08T20:53:00Z" itemprop="datePublished">
            March 08, 2017
            </time>
          
            
            â€¢ <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Travis Toulson</span></span>
          
        </p>
      </header>

      <div class="post-content e-content" itemprop="articleBody">
        

<p><strong>UPDATE:</strong> After posting this article, Jeff Pierce reminded me of a better way than the original 123TEXTQUERY321 approach. I have since updated the scripts and article here and provided a deeper explanation in <a href="/blog/gliderecord-full-text-search-explained">another article</a>.</p>

<hr />

<p>When looking at the form filters in ServiceNow, I think all admins and developers reach a point where we start to wonder &ldquo;How do I search Keywords in my scripts?&rdquo; After all, that full text search using &ldquo;for text&rdquo; or the &ldquo;Keywords&rdquo; filter is so tantalizing for any custom CMS / Service Portal search feature.</p>

<figure>
  <img src="images/Zing+Text+on+ServiceNow+Form.png" />
  <figcaption>
    Zing Text Search on ServiceNow Form
  </figcaption>
</figure>

<p>For those unaware, this global / full text search capability is powered by <a href="http://wiki.servicenow.com/index.php?title=Administering_Global_Text_Search#gsc.tab=0">Zing</a> in ServiceNow and it can easily fly under your radar as I realized recently when perusing some comments in the Now community. After all, the encoded query is actually a little misleading: <strong>GOTO123TEXTQUERY321=*@example.com</strong>. After some experimenting, research, or reverse engineering, you will likely discover that the GOTO part is completely unnecessary but otherwise this full text search is completely accessible through GlideRecord directly (scripts updated to use the IR_AND_OR_QUERY instead of the 123TEXTQUERY321):</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">gr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GlideRecord</span><span class="p">(</span><span class="s1">&#39;sc_cat_item&#39;</span><span class="p">);</span>
<span class="nx">gr</span><span class="p">.</span><span class="nx">addQuery</span><span class="p">(</span><span class="s1">&#39;IR_AND_OR_QUERY&#39;</span><span class="p">,</span> <span class="s1">&#39;Application&#39;</span><span class="p">);</span>
<span class="nx">gr</span><span class="p">.</span><span class="nx">query</span><span class="p">();</span>

<span class="k">while</span> <span class="p">(</span><span class="nx">gr</span><span class="p">.</span><span class="nx">next</span><span class="p">())</span> <span class="p">{</span>
  <span class="nx">gs</span><span class="p">.</span><span class="nx">print</span><span class="p">(</span><span class="nx">gr</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">gr</span><span class="p">.</span><span class="nx">ir_query_score</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>In the above script, you will notice 2 things:</p>

<ol>
<li>I am searching the field &ldquo;IR_AND_OR_QUERY&rdquo;</li>
<li>An additional field is added to the resulting GlideRecord called ir_query_score</li>
</ol>

<h2 id="search-ir-and-or-query">Search IR_AND_OR_QUERY</h2>

<p>Searching on the IR_AND_OR_QUERY is the magic that tells GlideRecord &ldquo;query this value in the Zing global text search.&rdquo; The cool part is that it seems to be compatible with other searches as well. So you can add additional search criteria such as active=true or some more advanced GlideRecord query and it will filter down your Zing results. I&rsquo;m honestly not sure how that works under the hood but the results are pretty awesome!</p>

<h2 id="relevancy-scores">Relevancy Scores</h2>

<figure>
  <img src="images/Zing+GlideRecord+BG+Script+Results.png" />
  <figcaption>
    Background Script Text Search Results
  </figcaption>
</figure>

<p>Even better is that the calculated <a href="http://wiki.servicenow.com/index.php?title=Document_scoring#gsc.tab=0">document scores</a>, the assumed relevance of the document to the search term, is actually added to the record field called <strong>ir_query_score</strong>. One thing to keep in mind is that the weighted scores are adjusted by adding the ts_weight attribute to a field&rsquo;s dictionary attribute. For example, take a look at the previous background script results as run in my dev instance in the image.</p>

<p>See how &ldquo;Custom Applications&rdquo; has a score of 103. That&rsquo;s because I added an attribute <strong>ts_weight=100</strong> to the sc_cat_item.name field. So the names are weighted 100x heavier than any other content on the record.</p>

<p>You&rsquo;ll also note that in my script, I don&rsquo;t have any sort order defined. The text search not only seems automatically order by the score in descending order; it also appears to resist any other ordering. Any time I add an order by field, it breaks the result scoring and possibly the result set entirely.</p>

<p>It seems a small price to pay, I can always manually order the records with an array sort if its that important.</p>

      </div>

      <a class="u-url" href="/blog/how-to-do-full-text-search-with-gliderecord" hidden></a>
    </article><div class="subscribe-form">
  
  <div id="mc_embed_signup">
    <form action="https://codecreative.us14.list-manage.com/subscribe/post?u=98c1070493fa133df8ea08394&amp;id=f759c17295" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
      <div id="mc_embed_signup_scroll">
        <h2>Subscribe</h2>
        <div class="subtext">Sign up with your email address to receive news and updates.</div>
        <div>
          <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Email Address" required>

          
          <div class="sr-only" aria-hidden="true">
            <input type="text" name="b_98c1070493fa133df8ea08394_f759c17295" tabindex="-1" value="">
          </div>

          <input type="submit" value="Sign Up" name="subscribe" id="mc-embedded-subscribe" class="button">
        </div>
      </div>
    </form>
  </div>
  
</div>
</div>

      </main><footer>
  <div class="footer-content-wrap">
    <p class="text-align-center">
      <a href="/servicenow">Blog</a>
      &nbsp;|&nbsp;
      <a href="/about">About</a>
      &nbsp;|&nbsp;
      <a href="/contact">Contact</a>
    </p>
    <div class="text-align-center">
      
    </div>
  </div>
</footer>
<script type="text/javascript" src="/assets/main.js"></script>
</body>
</html>
