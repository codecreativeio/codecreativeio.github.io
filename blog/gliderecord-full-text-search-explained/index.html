<!DOCTYPE html>
<html>
  <head><meta charset="utf-8">

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<link href="https://fonts.googleapis.com/css?family=Julius+Sans+One|Slabo+13px|Open+Sans:300" rel="stylesheet">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
<link rel="stylesheet" href="https://codecreative.io/assets/main.min.134f18f3e3a03f460e46afb7417c639309b72631f8a425376d406f35fac25eb1.css">
<title>GlideRecord Full Text Search Explained | CodeCreative | A ServiceNow Blog</title>
<meta name="description" content="After posting last week&#39;s GlideRecord Full Text Search article using 123TEXTQUERY321, Jeff Pierce reached out and reminded me of a better way of doing it using IR_AND_OR_QUERY. So special thanks to him for helping to clear this up!">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?d=20181101201248">
<link rel="canonical" href="https://codecreative.io/blog/gliderecord-full-text-search-explained/"><meta property="og:site_name" content="CodeCreative | A ServiceNow Blog">
<meta property="og:title" content="GlideRecord Full Text Search Explained">
<meta property="og:url" content="https://codecreative.io/blog/gliderecord-full-text-search-explained/">

<meta property="og:type" content="article">

<meta property="og:description" content="After posting last week&#39;s GlideRecord Full Text Search article using 123TEXTQUERY321, Jeff Pierce reached out and reminded me of a better way of doing it using IR_AND_OR_QUERY. So special thanks to him for helping to clear this up!">

<meta property="og:image" content="https://codecreative.io/blog/gliderecord-full-text-search-explained/images/social.png">

<meta itemprop="name" content="GlideRecord Full Text Search Explained">
<meta itemprop="url" content="https://codecreative.io/blog/gliderecord-full-text-search-explained/">
<meta itemprop="description" content="After posting last week&#39;s GlideRecord Full Text Search article using 123TEXTQUERY321, Jeff Pierce reached out and reminded me of a better way of doing it using IR_AND_OR_QUERY. So special thanks to him for helping to clear this up!">

<meta itemprop="thumbnailUrl" content="https://codecreative.io/blog/gliderecord-full-text-search-explained/images/social.png">
<link rel="image_src" href="https://codecreative.io/blog/gliderecord-full-text-search-explained/images/social.png">
<meta itemprop="image" content="https://codecreative.io/blog/gliderecord-full-text-search-explained/images/social.png">


<meta name="twitter:title" content="GlideRecord Full Text Search Explained">
<meta name="twitter:image" content="https://codecreative.io/blog/gliderecord-full-text-search-explained/images/social.png">
<meta name="twitter:url" content="https://codecreative.io/blog/gliderecord-full-text-search-explained/">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:description" content="After posting last week&#39;s GlideRecord Full Text Search article using 123TEXTQUERY321, Jeff Pierce reached out and reminded me of a better way of doing it using IR_AND_OR_QUERY. So special thanks to him for helping to clear this up!">

<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="">

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-90280965-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-90280965-1');
</script>

<script type="application/ld+json">
{
    "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https://codecreative.io/"
    },
    "name" : "GlideRecord Full Text Search Explained",
    "headline" : "GlideRecord Full Text Search Explained",
    "description" : "After posting last week&#39;s GlideRecord Full Text Search article using 123TEXTQUERY321, Jeff Pierce reached out and reminded me of a better way of doing it using IR_AND_OR_QUERY. So special thanks to him for helping to clear this up!","image": "https://codecreative.io/blog/gliderecord-full-text-search-explained/images/social.png","inLanguage" : "en-US",
      "author" : "Travis Toulson",
      "creator" : "Travis Toulson","publisher": "Travis Toulson",
    "copyrightHolder" : "Travis Toulson",
    "copyrightYear" : "2017",
    "datePublished": "2017-03-14 21:36:29 &#43;0000 UTC",
    "dateModified" : "2017-03-14 21:36:29 &#43;0000 UTC",
    "url" : "https://codecreative.io/blog/gliderecord-full-text-search-explained/",
    "wordCount" : "819",
    "keywords" : [ "Blog" ]
}
</script>


  </head>
  <body><header role="banner">
  <h1 class="logo">
      <a href="/">
         <img src="/assets/codecreativelogo.png" alt="GlideRecord Full Text Search Explained" />
         <span class="sr-only">CodeCreative Logo, click to navigate home</span>
      </a>
    </h1>

  <div class="menuToggle">
    <button class="hamburger" type="button" onclick="toggleMenu()">
      <span class="hamburger-box">
        <span class="hamburger-inner"></span>
      </span>
      <span class="sr-only">Toggle Menu</span>
    </button>
  </div>

  <nav class="fullNav">
    <ul>
      
      
        <li title="Home">
          <a class="" href="/">Home</a>
        </li>
      
        <li title="Blog">
          <a class="" href="/blog/">Blog</a>
        </li>
      
        <li title="About">
          <a class="" href="/about/">About</a>
        </li>
      
        <li title="Contact">
          <a class="" href="/contact/">Contact</a>
        </li>
      
    </ul>
  </nav>
</header>
<main>
  <header class="banner">
    <h1>GlideRecord Full Text Search Explained</h1>
  </header>

  <div class="content text-content">
    <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

      <header class="post-header">
        <h1 class="post-title p-name sr-only" itemprop="name headline">GlideRecord Full Text Search Explained</h1>
        <p class="post-meta">
            <time class="dt-published" datetime="2017-03-14T21:36:29Z" itemprop="datePublished">
            March 14, 2017
            </time>
          
            
            • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Travis Toulson</span></span>
          
        </p>
      </header>

      <div class="post-content e-content" itemprop="articleBody">
        

<p>After posting last week&rsquo;s <a href="/blog/how-to-do-full-text-search-with-gliderecord">GlideRecord Full Text Search</a> article using <em>123TEXTQUERY321</em>, <a href="https://www.linkedin.com/in/jeffpiercecms/">Jeff Pierce</a> reached out and reminded me of a better way of doing it using <em>IR_AND_OR_QUERY</em>. So special thanks to him for helping to clear this up!</p>

<p>I have since updated my previous article to this approach but I wanted to take a moment to dive into the multiple methods of Full Text Search and their differences.</p>

<h2 id="ir-and-query">IR_AND_QUERY</h2>

<figure>
  <img src="images/IR_AND_QUERY+Results.png" />
  <figcaption>
    IR_AND_QUERY Results
  </figcaption>
</figure>

<p>Behind the scenes, the method previously demonstrated (<em>123TEXTQUERY321</em>) behaves in the same way as using <em>IR_AND_QUERY</em>. If we use similar code to last time, replacing only the search method, we will yield the same Catalog Item results in our query. The change in the script below can be seen on line 2, for example, using <em>IR_AND_QUERY</em> instead of <em>123TEXTQUERY321.</em> There is no difference between the below script and last week&rsquo;s script (aside from the title field no longer being weighted to 100).</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">gr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GlideRecord</span><span class="p">(</span><span class="s1">&#39;sc_cat_item&#39;</span><span class="p">);</span>
<span class="nx">gr</span><span class="p">.</span><span class="nx">addQuery</span><span class="p">(</span><span class="s1">&#39;IR_AND_QUERY&#39;</span><span class="p">,</span> <span class="s1">&#39;Application&#39;</span><span class="p">);</span>
<span class="nx">gr</span><span class="p">.</span><span class="nx">query</span><span class="p">();</span>

<span class="k">while</span> <span class="p">(</span><span class="nx">gr</span><span class="p">.</span><span class="nx">next</span><span class="p">())</span> <span class="p">{</span>
  <span class="nx">gs</span><span class="p">.</span><span class="nx">print</span><span class="p">(</span><span class="nx">gr</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">gr</span><span class="p">.</span><span class="nx">ir_query_score</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>So what&rsquo;s the problem? Well instead of searching for the text <em>Application</em>, let&rsquo;s assume a user enters <em>Test Application</em> instead. No sense in a screenshot, there aren&rsquo;t any results in my instance. But wait! Why wouldn&rsquo;t the <em>Custom Application</em> Catalog Item show up in a search for <em>Test Application</em>? Surely there is some relevance!</p>

<p>A record has to match all search terms to be considered relevant for both 123TEXTQUERY321 and IR_AND_QUERY.</p>

<aside class="ccPullQuote right w-50">
  <p>A record has to match all search terms to be considered relevant for both 123TEXTQUERY321 and IR_AND_QUERY.</p>
</aside>

<p>In this case though, that isn&rsquo;t how <em>IR_AND_QUERY</em> works. This query method will join the search terms with an <em>AND</em> conjunction. In other words, in this case it will search for Catalog Items with <em>Test AND Application</em> in the searchable text. A record has to match all search terms to be considered relevant for both <em>123TEXTQUERY321</em> and <em>IR_AND_QUERY</em>. And that&rsquo;s exactly why this method is often not the best, there are simply too many scenarios that won&rsquo;t match any records.</p>

<h2 id="ir-or-query">IR_OR_QUERY</h2>

<p>The <em>IR_OR_QUERY</em> search method on the other hand will perform an OR conjunction on the search terms. By that, I mean that a search text of <em>Test Application</em> will in actuality search for <em>Test OR Application</em>. Any record containing either word in its searchable fields will be considered a relevant hit.</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">gr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GlideRecord</span><span class="p">(</span><span class="s1">&#39;sc_cat_item&#39;</span><span class="p">);</span>
<span class="nx">gr</span><span class="p">.</span><span class="nx">addQuery</span><span class="p">(</span><span class="s1">&#39;IR_OR_QUERY&#39;</span><span class="p">,</span> <span class="s1">&#39;Test Application&#39;</span><span class="p">);</span>
<span class="nx">gr</span><span class="p">.</span><span class="nx">query</span><span class="p">();</span>

<span class="k">while</span> <span class="p">(</span><span class="nx">gr</span><span class="p">.</span><span class="nx">next</span><span class="p">())</span> <span class="p">{</span>
  <span class="nx">gs</span><span class="p">.</span><span class="nx">print</span><span class="p">(</span><span class="nx">gr</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">gr</span><span class="p">.</span><span class="nx">ir_query_score</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>When we execute the above code (changes on line 2) we can see results that are similar to our original search for the term <em>Application</em>. This is fantastic! Now multiple search terms will no longer eliminate an entire list of potential hits as is the case with the previous search methods.</p>

<p>Any record containing either word in its searchable fields will be considered a relevant hit [for IR_OR_QUERY].</p>

<aside class="ccPullQuote right w-50">
  <p>Any record containing either word in its searchable fields will be considered a relevant hit \[for IR_OR_QUERY\].</p>
</aside>

<p>But there is still a flaw. If I have two Catalog Items, <em>Test Application</em> and <em>Custom Application</em>, and I run a search for <em>Test Application</em> using <em>IR_OR_QUERY</em>, which would you expect to rank higher? <em>Test Application</em> at face value seems the more relevant&hellip; it&rsquo;s an exact match for heaven&rsquo;s sake! But thanks to <em>IR_OR_QUERY</em>, its possible that <em>Test Application</em> may not even rank near the top depending on the search terms discovered in the body. As few as 3 appearances of the term <em>Application</em> will offset the a match of all terms. Its two (different) matched terms vs 3 (same) matched terms and the <em>IR_OR_QUERY</em> doesn&rsquo;t care about how many of the original terms were matched the way <em>IR_AND_QUERY</em> does.</p>

<h2 id="ir-and-or-query">IR_AND_OR_QUERY</h2>

<p>In most cases, we would want to give deference to exact matches or content that matches all search terms. If a user searches for <em>Dell XPS Computer</em>, we would hope for a Dell XPS computer to rank more highly than a knowledge article that says <em>computer</em> a lot. This is where <em>IR_AND_OR_QUERY</em> comes into play. The <em>IR_AND_OR_QUERY</em> executes according to its name:</p>

<ol>
<li>Execute <em>IR_AND_QUERY</em></li>
<li>Check number of results against glide.ts.query.and_or_limit property or text_search_and_or_limit table attribute</li>
<li>If # of results is greater

<ol>
<li>Return results</li>
</ol></li>
<li>If # of results is less than

<ol>
<li>Execute <em>IR_OR_QUERY</em> and return results</li>
</ol></li>
</ol>

<p><em>IR_AND_OR_QUERY</em> is often the best choice for full text search.</p>

<aside class="ccPullQuote right w-50">
  <p>IR_AND_OR_QUERY is often the best choice for full text search.</p>
</aside>

<p>With this process, <em>IR_AND_OR_QUERY</em> can attempt to defer to results that match all search terms but in the event that not enough are found, it can fallback to a sensible <em>IR_OR_QUERY</em>. For this reason, the <em>IR_AND_OR_QUERY</em> is often the best choice for full text search.</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">gr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GlideRecord</span><span class="p">(</span><span class="s1">&#39;sc_cat_item&#39;</span><span class="p">);</span>
<span class="nx">gr</span><span class="p">.</span><span class="nx">addQuery</span><span class="p">(</span><span class="s1">&#39;IR_AND_OR_QUERY&#39;</span><span class="p">,</span> <span class="s1">&#39;Server Application&#39;</span><span class="p">);</span>
<span class="nx">gr</span><span class="p">.</span><span class="nx">query</span><span class="p">();</span>

<span class="k">while</span> <span class="p">(</span><span class="nx">gr</span><span class="p">.</span><span class="nx">next</span><span class="p">())</span> <span class="p">{</span>
  <span class="nx">gs</span><span class="p">.</span><span class="nx">print</span><span class="p">(</span><span class="nx">gr</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">gr</span><span class="p">.</span><span class="nx">ir_query_score</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>But the more important lesson to learn here is don&rsquo;t trust your memory, notes from years ago, or things you read on the internet.</p>

      </div>

      <a class="u-url" href="/blog/gliderecord-full-text-search-explained" hidden></a>
    </article><div class="subscribe-form">
  
  <div id="mc_embed_signup">
    <form action="https://codecreative.us14.list-manage.com/subscribe/post?u=98c1070493fa133df8ea08394&amp;id=f759c17295" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
      <div id="mc_embed_signup_scroll">
        <h2>Subscribe</h2>
        <div class="subtext">Sign up with your email address to receive news and updates.</div>
        <div>
          <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Email Address" required>

          
          <div class="sr-only" aria-hidden="true">
            <input type="text" name="b_98c1070493fa133df8ea08394_f759c17295" tabindex="-1" value="">
          </div>

          <input type="submit" value="Sign Up" name="subscribe" id="mc-embedded-subscribe" class="button">
        </div>
      </div>
    </form>
  </div>
  
</div>
</div>

      </main><footer>
  <div class="footer-content-wrap">
    <p class="text-align-center">
      <a href="/servicenow">Blog</a>
      &nbsp;|&nbsp;
      <a href="/about">About</a>
      &nbsp;|&nbsp;
      <a href="/contact">Contact</a>
    </p>
    <div class="text-align-center">
      
    </div>
  </div>
</footer>
<script type="text/javascript" src="/assets/main.js"></script>
</body>
</html>
