<!DOCTYPE html>
<html>
  <head><meta charset="utf-8">

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<link href="https://fonts.googleapis.com/css?family=Julius+Sans+One|Slabo+13px|Open+Sans:300" rel="stylesheet">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
<link rel="stylesheet" href="https://codecreative.io/assets/main.min.134f18f3e3a03f460e46afb7417c639309b72631f8a425376d406f35fac25eb1.css">
<title>Adding Doctype to a UI Page | CodeCreative | A ServiceNow Blog</title>
<meta name="description" content="A page&#39;s doctype usually doesn&#39;t seem to make a huge difference in output but occasionally, certain scripts and html/css tricks require a specific doctype. In my case, I needed the standard HTML5 doctype. Here is how I added a custom doctype to a UI Page.">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?d=20181101201248">
<link rel="canonical" href="https://codecreative.io/blog/adding-doctype-to-a-ui-page/"><meta property="og:site_name" content="CodeCreative | A ServiceNow Blog">
<meta property="og:title" content="Adding Doctype to a UI Page">
<meta property="og:url" content="https://codecreative.io/blog/adding-doctype-to-a-ui-page/">

<meta property="og:type" content="article">

<meta property="og:description" content="A page&#39;s doctype usually doesn&#39;t seem to make a huge difference in output but occasionally, certain scripts and html/css tricks require a specific doctype. In my case, I needed the standard HTML5 doctype. Here is how I added a custom doctype to a UI Page.">

<meta itemprop="name" content="Adding Doctype to a UI Page">
<meta itemprop="url" content="https://codecreative.io/blog/adding-doctype-to-a-ui-page/">
<meta itemprop="description" content="A page&#39;s doctype usually doesn&#39;t seem to make a huge difference in output but occasionally, certain scripts and html/css tricks require a specific doctype. In my case, I needed the standard HTML5 doctype. Here is how I added a custom doctype to a UI Page.">


<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="">

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-90280965-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-90280965-1');
</script>

<script type="application/ld+json">
{
    "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https://codecreative.io/"
    },
    "name" : "Adding Doctype to a UI Page",
    "headline" : "Adding Doctype to a UI Page",
    "description" : "A page&#39;s doctype usually doesn&#39;t seem to make a huge difference in output but occasionally, certain scripts and html/css tricks require a specific doctype. In my case, I needed the standard HTML5 doctype. Here is how I added a custom doctype to a UI Page.","inLanguage" : "en-US",
      "author" : "Travis Toulson",
      "creator" : "Travis Toulson","publisher": "Travis Toulson",
    "copyrightHolder" : "Travis Toulson",
    "copyrightYear" : "2015",
    "datePublished": "2015-06-15 16:00:00 &#43;0000 UTC",
    "dateModified" : "2015-06-15 16:00:00 &#43;0000 UTC",
    "url" : "https://codecreative.io/blog/adding-doctype-to-a-ui-page/",
    "wordCount" : "427",
    "keywords" : [ "Blog" ]
}
</script>


  </head>
  <body><header role="banner">
  <h1 class="logo">
      <a href="/">
         <img src="/assets/codecreativelogo.png" alt="Adding Doctype to a UI Page" />
         <span class="sr-only">CodeCreative Logo, click to navigate home</span>
      </a>
    </h1>

  <div class="menuToggle">
    <button class="hamburger" type="button" onclick="toggleMenu()">
      <span class="hamburger-box">
        <span class="hamburger-inner"></span>
      </span>
      <span class="sr-only">Toggle Menu</span>
    </button>
  </div>

  <nav class="fullNav">
    <ul>
      
      
        <li title="Home">
          <a class="" href="/">Home</a>
        </li>
      
        <li title="Blog">
          <a class="" href="/blog/">Blog</a>
        </li>
      
        <li title="About">
          <a class="" href="/about/">About</a>
        </li>
      
        <li title="Contact">
          <a class="" href="/contact/">Contact</a>
        </li>
      
    </ul>
  </nav>
</header>
<main>
  <header class="banner">
    <h1>Adding Doctype to a UI Page</h1>
  </header>

  <div class="content text-content">
    <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

      <header class="post-header">
        <h1 class="post-title p-name sr-only" itemprop="name headline">Adding Doctype to a UI Page</h1>
        <p class="post-meta">
            <time class="dt-published" datetime="2015-06-15T16:00:00Z" itemprop="datePublished">
            June 15, 2015
            </time>
          
            
            • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Travis Toulson</span></span>
          
        </p>
      </header>

      <div class="post-content e-content" itemprop="articleBody">
        

<p>Today, I am going to share a trick I learned to add a doctype to a UI Page based off of <a href="https://community.servicenow.com/people/will.leingang">will.leingang</a>&rsquo;s article <a href="https://community.servicenow.com/community/develop/blog/2015/02/03/a-ui-page-without-the-framework-page-template">Making a UI Page without using the framework page template</a>. A page&rsquo;s doctype usually doesn&rsquo;t seem to make a huge difference in output but occasionally, certain scripts and html/css tricks require a specific doctype. In my case, I needed the standard HTML5 doctype.</p>

<h2 id="what-not-to-do">What Not To Do</h2>

<p>As my first attempt, I foolishly tried this for the UI Page:</p>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34; ?&gt;</span>  
<span class="nt">&lt;j:jelly</span> <span class="na">trim=</span><span class="s">&#34;false&#34;</span> <span class="na">xmlns:j=</span><span class="s">&#34;jelly:core&#34;</span> <span class="na">xmlns:g=</span><span class="s">&#34;glide&#34;</span> <span class="na">xmlns:j2=</span><span class="s">&#34;null&#34;</span> <span class="na">xmlns:g2=</span><span class="s">&#34;null&#34;</span><span class="nt">&gt;</span>  
     <span class="cp">&lt;!DOCTYPE HTML&gt;</span>  
     Hello World  
<span class="nt">&lt;/j:jelly&gt;</span></code></pre></div>
<p>And ServiceNow promptly informed me:</p>

<figure>
  <img src="images/service+now+ui+page+doctype+error.png" />
  <figcaption>
    ServiceNow UI Page Doctype Error
  </figcaption>
</figure>

<p>In hindsight, I should have seen that coming. Jelly is XML and XML recognizes and interprets a DOTYPE declaration. That could cause the Jelly runner to throw all sorts of errors, bad juju.</p>

<h2 id="another-bad-idea">Another Bad Idea</h2>

<p>So then my next stroke of genius was to encode the XML entities to trick the parser. Cheap parser loopholes, they exist so we can use them right? So here is the code for attempt #2:</p>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34; ?&gt;</span>  
<span class="nt">&lt;j:jelly</span> <span class="na">trim=</span><span class="s">&#34;false&#34;</span> <span class="na">xmlns:j=</span><span class="s">&#34;jelly:core&#34;</span> <span class="na">xmlns:g=</span><span class="s">&#34;glide&#34;</span> <span class="na">xmlns:j2=</span><span class="s">&#34;null&#34;</span> <span class="na">xmlns:g2=</span><span class="s">&#34;null&#34;</span><span class="nt">&gt;</span>  
     <span class="ni">&amp;lt;</span>!DOCTYPE HTML<span class="ni">&amp;gt;</span>  
     Hello World  
<span class="nt">&lt;/j:jelly&gt;</span></code></pre></div>
<p>No errors on save and I was feeling pretty clever as I clicked the refresh button on my UI Page. The results were&hellip; slightly less than satisfying:</p>

<figure>
  <img src="images/servicenow+ui+page+doctype+error+result.png" />
  <figcaption>
    ServiceNow UI Page Doctype Error Result
  </figcaption>
</figure>

<p>Yes. That is the page I saw in the browser. For those who are still confused, this is the HTML in the browser:</p>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;html&gt;</span>  
  <span class="nt">&lt;head&gt;&lt;/head&gt;</span>  
  <span class="nt">&lt;body&gt;</span>  
    <span class="ni">&amp;lt;</span>!DOCTYPE HTML<span class="ni">&amp;gt;</span>  
    Hello World  
    <span class="nt">&lt;script&gt;&lt;/script&gt;</span>  
  <span class="nt">&lt;/body&gt;</span>  
<span class="nt">&lt;/html&gt;</span></code></pre></div>
<h2 id="problem-solved-problem-staying-solved">Problem Solved, Problem Staying Solved</h2>

<p>So with that failure, I turned to option #3, leveraging the <g:no\_escape> tag to embed raw html. Since Jelly runs in two phases and the second phase parse would likely complain about a misplaced &lt;!DOCTYPE&gt; as much as phase 1, I had to run no_escape in phase 2 to eliminate any XML parsing conflicts. This is a common trick I use when XML is getting in my way. Of course, to do this, I needed a string variable containing the raw html to embed, so I also added <g:evaluate>. Here is the UI Page XML:</p>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34; ?&gt;</span>  
<span class="nt">&lt;j:jelly</span> <span class="na">trim=</span><span class="s">&#34;false&#34;</span> <span class="na">xmlns:j=</span><span class="s">&#34;jelly:core&#34;</span> <span class="na">xmlns:g=</span><span class="s">&#34;glide&#34;</span> <span class="na">xmlns:j2=</span><span class="s">&#34;null&#34;</span> <span class="na">xmlns:g2=</span><span class="s">&#34;null&#34;</span><span class="nt">&gt;</span>  
  <span class="nt">&lt;g:evaluate&gt;</span>  
    var docType = &#39;<span class="ni">&amp;lt;</span>!DOCTYPE HTML<span class="ni">&amp;gt;</span>&#39;;  
  <span class="nt">&lt;/g:evaluate&gt;</span>  
  <span class="nt">&lt;g2:no_escape&gt;</span>  
    $[docType]  
  <span class="nt">&lt;/g2:no_escape&gt;</span>  
  Hello World  
<span class="nt">&lt;/j:jelly&gt;</span></code></pre></div>
<p>And the successful result:</p>

<figure>
  <img src="images/servicenow+ui+page+doctype+success.png" />
  <figcaption>
    ServiceNow UI Page Doctype Success
  </figcaption>
</figure>

<p>So it took a little trickery to work around the XML pitfalls but in the end I was able to use sysparm_direct=true, send a DOCTYPE to the browser and fix the issue with my script library.</p>

      </div>

      <a class="u-url" href="/blog/adding-doctype-to-a-ui-page" hidden></a>
    </article><div class="subscribe-form">
  
  <div id="mc_embed_signup">
    <form action="https://codecreative.us14.list-manage.com/subscribe/post?u=98c1070493fa133df8ea08394&amp;id=f759c17295" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
      <div id="mc_embed_signup_scroll">
        <h2>Subscribe</h2>
        <div class="subtext">Sign up with your email address to receive news and updates.</div>
        <div>
          <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Email Address" required>

          
          <div class="sr-only" aria-hidden="true">
            <input type="text" name="b_98c1070493fa133df8ea08394_f759c17295" tabindex="-1" value="">
          </div>

          <input type="submit" value="Sign Up" name="subscribe" id="mc-embedded-subscribe" class="button">
        </div>
      </div>
    </form>
  </div>
  
</div>
</div>

      </main><footer>
  <div class="footer-content-wrap">
    <p class="text-align-center">
      <a href="/servicenow">Blog</a>
      &nbsp;|&nbsp;
      <a href="/about">About</a>
      &nbsp;|&nbsp;
      <a href="/contact">Contact</a>
    </p>
    <div class="text-align-center">
      
    </div>
  </div>
</footer>
<script type="text/javascript" src="/assets/main.js"></script>
</body>
</html>
